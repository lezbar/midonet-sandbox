zookeeper1:
  extends:
    file: $BASE/zookeeper.yml
    service: zookeeper
  image: sandbox/zookeeper:3.4.5
  hostname: zookeeper1
  volumes:
  - /zoo/conf/
  environment:
  - ZOO_ID=1
  - ZOO_IN_MEM=false

zookeeper2:
  extends:
    file: $BASE/zookeeper.yml
    service: zookeeper
  image: sandbox/zookeeper:3.4.5
  hostname: zookeeper2
  environment:
  - ZOO_ID=2
  - ZOO_IN_MEM=false
  volumes_from:
  - zookeeper1

zookeeper3:
  extends:
    file: $BASE/zookeeper.yml
    service: zookeeper
  image: sandbox/zookeeper:3.4.5
  hostname: zookeeper3
  environment:
  - ZOO_ID=3
  - ZOO_IN_MEM=false
  volumes_from:
  - zookeeper1
  links:
  - zookeeper1:zk1
  - zookeeper2:zk2

cassandra1:
  extends:
    file: $BASE/cassandra.yml
    service: cassandra
  image: sandbox/cassandra:2.0
  hostname: cassandra1

midolman:
  extends:
    file: $BASE/midolman.yml
    service: midolman
  image: sandbox/midolman:v1.9
  hostname: midolman
  links:
  - "zookeeper1:zk1"
  - "zookeeper2:zk2"
  - "zookeeper3:zk3"
  - "cassandra1:cs1"

api:
  extends:
    file: $BASE/midonet-api.yml
    service: api
  image: sandbox/midonet-api:v1.9
  hostname: api
  links:
  - "zookeeper1:zk1"
  - "zookeeper2:zk2"
  - "zookeeper3:zk3"
  - "keystone:keystone"

keystone:
  extends:
    file: $BASE/keystone.yml
    service: keystone
  image: sandbox/keystone:liberty
  hostname: keystone

mariadb:
  image: mariadb:5.5
  hostname: mariadb
  environment:
  - MYSQL_ROOT_PASSWORD=root

neutron:
  extends:
    file: $BASE/neutron.yml
    service: neutron
  image: sandbox/neutron:liberty
  hostname: neutron
  links:
  - "keystone:keystone"
  - "api:midonetapi"
  - "mariadb:mariadb"
